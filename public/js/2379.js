"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2379,2520,6738,6790,2210],{2994:(e,t,o)=>{o.d(t,{R:()=>d});var r=o(8129),n=o.n(r),l=o(821),a=o(7879);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function s(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function d(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){s(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},o),u=(0,l.qj)(o),d=(0,l.iH)(!1),c=function(){d.value=!1,t("update:show",!1),function(){for(var e in r)u[e]=r[e]}()};return{form:u,isSubmit:d,submit:function(){a.Nd.post(n()(e),u,{preserveState:function(e){return Object.keys(e.props.errors).length},onStart:function(){d.value=!0},onError:function(e){Object.keys(e).length||c(),d.value=!1}})},close:c}}},1792:(e,t,o)=>{o.d(t,{Z:()=>l});var r=o(3645),n=o.n(r)()((function(e){return e[1]}));n.push([e.id,".fade-enter-active,.fade-leave-active{transition:opacity .1s ease}.fade-enter-from,.fade-leave-to{opacity:0}.map-box{height:400px;width:100%}",""]);const l=n},2520:(e,t,o)=>{o.r(t),o.d(t,{default:()=>a});var r=o(821);var n=o(5836);const l={name:"Map",components:{yandexMap:n.xR,ymapMarker:n.Jk},emits:["update:coordinates"],props:{latitude:{type:[String,Number]},longitude:{type:[String,Number]},mapZoom:{type:[String,Number],default:10}},data:function(){return{coords:[this.latitude,this.longitude],zoom:this.mapZoom}},setup:function(){return{controls:["geolocationControl"],detailedControls:{zoomControl:{position:{right:10,top:50}}}}},methods:{updateCoords:function(e){"r"===e.constructor.name&&(this.coords=e.get("coords"),this.$emit("update:coordinates",e.get("coords")))}}};const a=(0,o(3744).Z)(l,[["render",function(e,t,o,n,l,a){var u=(0,r.up)("ymap-marker"),i=(0,r.up)("yandex-map");return(0,r.wg)(),(0,r.j4)(i,{coords:l.coords,zoom:o.mapZoom,controls:n.controls,"detailed-controls":n.detailedControls,onClick:a.updateCoords},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{coords:l.coords,"marker-id":1,"hint-content":e.$t("points.point_balloon_hint")},null,8,["coords","hint-content"])]})),_:1},8,["coords","zoom","controls","detailed-controls","onClick"])}]])},6738:(e,t,o)=>{o.r(t),o.d(t,{default:()=>a});var r=o(821),n=["textContent"];const l={name:"InputErrorV2",props:{error:String}};const a=(0,o(3744).Z)(l,[["render",function(e,t,o,l,a,u){return o.error?((0,r.wg)(),(0,r.iD)("div",{key:0,textContent:(0,r.zw)(o.error),class:"text-red-500 text-xs mt-1 px-1.5 w-72"},null,8,n)):(0,r.kq)("",!0)}]])},6790:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var r=o(821),n={class:"block text-sm font-medium text-gray-700"},l={key:0},a={key:1};const u={__name:"InputLabel",props:{value:{type:String}},setup:function(e){return function(t,o){return(0,r.wg)(),(0,r.iD)("label",n,[e.value?((0,r.wg)(),(0,r.iD)("span",l,(0,r.zw)(e.value),1)):((0,r.wg)(),(0,r.iD)("span",a,[(0,r.WI)(t.$slots,"default")]))])}}}},2210:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var r=o(821),n=["value"];const l={__name:"TextInput",props:{modelValue:{type:[String,Number],required:!0}},emits:["update:modelValue"],setup:function(e,t){var o=t.expose,l=(0,r.iH)(null);return(0,r.bv)((function(){l.value.hasAttribute("autofocus")&&l.value.focus()})),o({focus:function(){return l.value.focus()}}),function(t,o){return(0,r.wg)(),(0,r.iD)("input",{class:"shadow-sm text-sm border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 rounded-md h-10 px-3",value:e.modelValue,onInput:o[0]||(o[0]=function(e){return t.$emit("update:modelValue",e.target.value)}),ref_key:"input",ref:l},null,40,n)}}}},2379:(e,t,o)=>{o.r(t),o.d(t,{default:()=>C});var r=o(821),n=o(2994),l=o(6790),a=o(2210),u=o(6738),i=o(2520),s={key:0,class:"fixed top-0 inset-x-0 px-4 pt-6 z-50 sm:px-0 sm:flex sm:items-top sm:justify-center"},d=[(0,r._)("div",{class:"absolute inset-0 bg-black opacity-70"},null,-1)],c={class:"bg-white rounded-lg overflow-hidden shadow-xl transform w-full"},m={class:"px-6 py-4"},p={class:"text-lg py-4"},f={class:"flex gap-3"},v={class:"mt-4"},b={class:"mt-4"},g={class:"flex gap-3"},y={class:"mt-4"},x={class:"mt-4"},w={class:"flex gap-3"},S={class:"mt-4"},_={class:"mt-4"},h={class:"mt-4 map-box"},k={class:"px-6 py-4 text-right"},U=["disabled"];const j={__name:"PointDialog",props:{show:{type:Boolean,default:!1},options:Object,formData:Object,errors:Object},emits:["update:show"],setup:function(e,t){var o=t.emit,j=e,O=(0,n.R)("create.point",o,{client_name:"",address:"",point_name:"",latitude:55.75,longitude:37.62,crm_code:"",uuid:""}),V=O.form,W=O.isSubmit,$=O.submit,C=O.close;(0,r.YP)((function(){return j.formData}),(function(e){for(var t in e)V[t]=e[t]}));var D=function(e){V.latitude=e[0],V.longitude=e[1]};return(0,r.Xn)((function(){null!==localStorage.getItem("lat")&&localStorage.getItem("long")&&(V.latitude=localStorage.getItem("lat"),V.longitude=localStorage.getItem("long"))})),function(t,o){return e.show?((0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("div",{onClick:o[0]||(o[0]=function(){return(0,r.SU)(C)&&(0,r.SU)(C).apply(void 0,arguments)}),class:"fixed inset-0 transform transition-all"},d),(0,r._)("div",null,[(0,r._)("div",c,[(0,r._)("form",{onSubmit:o[8]||(o[8]=(0,r.iM)((function(){return(0,r.SU)($)&&(0,r.SU)($).apply(void 0,arguments)}),["prevent"]))},[(0,r._)("div",m,[(0,r._)("div",p,(0,r.zw)(t.$t("devices.point_info")),1),(0,r._)("div",f,[(0,r._)("div",v,[(0,r.Wm)(l.default,{for:"name",value:t.$t("points.client")},null,8,["value"]),(0,r.Wm)(a.default,{id:"name",type:"text",class:"mt-1 block w-72",modelValue:(0,r.SU)(V).client_name,"onUpdate:modelValue":o[1]||(o[1]=function(e){return(0,r.SU)(V).client_name=e}),required:""},null,8,["modelValue"]),(0,r.Wm)(u.default,{error:t.$page.props.errors.client_name},null,8,["error"])]),(0,r._)("div",b,[(0,r.Wm)(l.default,{for:"name",value:t.$t("points.crm_code")},null,8,["value"]),(0,r.Wm)(a.default,{id:"name",type:"text",class:"mt-1 block w-72",modelValue:(0,r.SU)(V).crm_code,"onUpdate:modelValue":o[2]||(o[2]=function(e){return(0,r.SU)(V).crm_code=e}),required:""},null,8,["modelValue"]),(0,r.Wm)(u.default,{error:t.$page.props.errors.crm_code},null,8,["error"])])]),(0,r._)("div",g,[(0,r._)("div",y,[(0,r.Wm)(l.default,{for:"name",value:t.$t("points.address")},null,8,["value"]),(0,r.Wm)(a.default,{id:"name",type:"text",class:"mt-1 block w-72",modelValue:(0,r.SU)(V).address,"onUpdate:modelValue":o[3]||(o[3]=function(e){return(0,r.SU)(V).address=e}),required:""},null,8,["modelValue"]),(0,r.Wm)(u.default,{error:t.$page.props.errors.address},null,8,["error"])]),(0,r._)("div",x,[(0,r.Wm)(l.default,{for:"name",value:t.$t("points.point_name")},null,8,["value"]),(0,r.Wm)(a.default,{id:"name",type:"text",class:"mt-1 block w-72",modelValue:(0,r.SU)(V).point_name,"onUpdate:modelValue":o[4]||(o[4]=function(e){return(0,r.SU)(V).point_name=e}),required:""},null,8,["modelValue"]),(0,r.Wm)(u.default,{error:t.$page.props.errors.point_name},null,8,["error"])])]),(0,r._)("div",w,[(0,r._)("div",S,[(0,r.Wm)(l.default,{for:"name",value:t.$t("points.longitude")},null,8,["value"]),(0,r.Wm)(a.default,{id:"name",type:"text",class:"mt-1 block w-72",modelValue:(0,r.SU)(V).latitude,"onUpdate:modelValue":o[5]||(o[5]=function(e){return(0,r.SU)(V).latitude=e}),required:""},null,8,["modelValue"]),(0,r.Wm)(u.default,{error:t.$page.props.errors.latitude},null,8,["error"])]),(0,r._)("div",_,[(0,r.Wm)(l.default,{for:"name",value:t.$t("points.latitude")},null,8,["value"]),(0,r.Wm)(a.default,{id:"name",type:"text",class:"mt-1 block w-72",modelValue:(0,r.SU)(V).longitude,"onUpdate:modelValue":o[6]||(o[6]=function(e){return(0,r.SU)(V).longitude=e}),required:""},null,8,["modelValue"]),(0,r.Wm)(u.default,{error:t.$page.props.errors.longitude},null,8,["error"])])]),(0,r._)("div",h,[(0,r.Wm)(i.default,{"onUpdate:coordinates":D,latitude:(0,r.SU)(V).latitude,longitude:(0,r.SU)(V).longitude,"map-zoom":17},null,8,["latitude","longitude"])])]),(0,r._)("div",k,[(0,r._)("button",{type:"submit",disabled:(0,r.SU)(W),class:(0,r.C_)([(0,r.SU)(W)?"opacity-50":"","w-24 inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-500 ml-3 text-sm"])},(0,r.zw)(t.$t("buttons.save")),11,U),(0,r._)("button",{onClick:o[7]||(o[7]=function(){return(0,r.SU)(C)&&(0,r.SU)(C).apply(void 0,arguments)}),type:"button",class:"mt-3 w-24 inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 mt-0 ml-3 text-sm"},(0,r.zw)(t.$t("buttons.cancel")),1)])],32)])])])):(0,r.kq)("",!0)}}};var O=o(3379),V=o.n(O),W=o(1792),$={insert:"head",singleton:!1};V()(W.Z,$);W.Z.locals;const C=j}}]);